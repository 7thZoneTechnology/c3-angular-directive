{"name":"C3-angular-directive","tagline":"Contains some samples to use c3js together with angularjs to give it a dynamic feel.","body":"# C3JS and AngularJS integration samples\r\nThis repository contains some samples to demonstrate what you can do when you integrate AngularJS with C3JS. This repository is mainly here to support a few blogpost. I am working an a better location for the directives. For now you can find them here.\r\n\r\n## Goal\r\nCome up with a few samples to demonstrate how to integrate C3js with AngularJS\r\n\r\n## References\r\nHomepage c3js library [http://c3js.org]\r\nHomepage AngularJS [https://angularjs.org]\r\n\r\nBlogpost about c3js by Roberto van der Linden: [Creating charts with c3.js](http://blog.trifork.com/2014/07/29/creating-charts-with-c3-js/)\r\nBlogpost about integrating c3js and angularjs by Jettro Coenradie: [Using C3js with AngularJS](http://www.gridshore.nl/2014/07/29/using-c3js-angularjs/)\r\n\r\nBlogpost about AngularJS Directives for c3js: [Angularjs directives for c3js chart library](http://blog.trifork.com/2014/08/19/angularjs-directives-for-c3-js-chart-library/)\r\n\r\nBlogpost about the improvements I made using grunt and bower: TODO\r\n\r\n## Installation and development\r\nWe are using grunt and bower during development. Bower makes it easier to use it for your own project as well. More on this in the next section. If you want to try out the project and change sources or something like that, you can use bower and grunt to do development.\r\n\r\nFirst use npm to install all grunt plugins, than use bower to install all bower dependencies.\r\n```\r\nnpm install\r\nbower install\r\n```\r\nNow grunt is available, you can use some of the utilities that grunt has in store for you. A nice one is to use the watch task and change one of the samples. There is also a plugin in place for running a development server. Just type grunt devserver and connect to port 8888 on your localhost.\r\n\r\n\r\n## Using it in your own project\r\nThe easiest way to use the directives is to use bower to install it to your project.\r\n```\r\nbower install c3-angular --save\r\n```\r\nIn the end you just need one file in your project: c3-angular.min.js\r\n\r\n## Documentation\r\nCheck the blogpost from Roberto above if you want an introdcution into what c3.js can do for you. If you want information about the basic usage of AngularJS together with C3.JS, check the first blogpost by Jettro. This documentation focussus on the directives.\r\n\r\nThe goal for the directive is to come up with some sort of DSL in the HTML language for creating charts with c3.js. I will go though the different aspects of creating a chart first.\r\n\r\nYou do not need a webserver to run the samples, the easiest way is to clone the repository from github or download the zip. Now we have grunt it is also easy to use a development webserver. Just execute grunt devserver\r\n\r\n### directive1.html\r\nThis one shows the one of the most basic charts, we define the data right in the chart. One line, no additional configuration.\r\n\r\n```html\r\n<c3chart bindto-id=\"chart1\">\r\n\t<chart-column column-id=\"data-1\" \r\n\t\t\t\t  column-values=\"30,200,100,400,150,250\"\r\n\t\t\t\t  column-type=\"line\"/>\t\t\r\n</c3chart>\r\n\r\n```\r\nThe main element is **c3chart**, with the attribute *bindto-id* we define the id of the html element the c3js chart is bound to. This makes it possible to add multiple charts to one page. In this sample we provide the data using a predifined set of numbers. This is done by the **chart-column** element. In this element we can define the id of the line, which is used in the tooltip and the legenda. Also you can change the type of the column by changing the *column-type*, change it to spline for instance.\r\n\r\nAnother way of providing data is using a more angular approach. Now we provide the data using the $scope of the controller.\r\n```html\r\n<c3chart bindto-id=\"chart\" chart-data=\"datapoints\" chart-columns=\"datacolumns\">\r\n</c3chart>\r\n```\r\n```javascript\r\nvar graphApp = angular.module('graphApp', ['gridshore.c3js.chart']);\r\n\r\ngraphApp.controller('GraphCtrl', function ($scope) {\r\n\t$scope.datapoints=[{\"x\":10,\"top-1\":10,\"top-2\":15},\r\n\t                   {\"x\":20,\"top-1\":100,\"top-2\":35},\r\n\t                   {\"x\":30,\"top-1\":15,\"top-2\":75},\r\n\t                   {\"x\":40,\"top-1\":50,\"top-2\":45}];\r\n\t$scope.datacolumns=[{\"id\":\"top-1\",\"type\":\"line\"},\r\n\t                    {\"id\":\"top-2\",\"type\":\"spline\"}];\r\n\t$scope.datax={\"id\":\"x\"};\r\n});\r\n```\r\nNotice that we put three objects in the $scope, two of which we also have in the html directive (*datapoints* and *datacolumns*). This time we have 2 lines: top-1 and top-2. As you can see we can configure the type again, this time I configured two different types, *line* and *spline*.\r\n\r\nIf you look closely at the datapoints, you can see we have an additional property called **x** as well as a different object on the $scope called **datax**. We can add an attribute to the directive called *chart-x* that tells c3js to use the values from *x* as values on the x axis. We can also change the name *top-1* to a nicer version and we can change the colors of the lines if we want to. The following code shows the changes.\r\n```html\r\n<c3chart bindto-id=\"chart\" chart-data=\"datapoints\" chart-columns=\"datacolumns\" chart-x=\"datax\">\r\n</c3chart>\r\n```\r\n```javascript\r\nvar graphApp = angular.module('graphApp', ['gridshore.c3js.chart']);\r\n\r\ngraphApp.controller('GraphCtrl', function ($scope) {\r\n\t$scope.datapoints=[{\"x\":10,\"top-1\":10,\"top-2\":15},\r\n\t                   {\"x\":20,\"top-1\":100,\"top-2\":35},\r\n\t                   {\"x\":30,\"top-1\":15,\"top-2\":75},\r\n\t                   {\"x\":40,\"top-1\":50,\"top-2\":45}];\r\n\t$scope.datacolumns=[{\"id\":\"top-1\",\"type\":\"line\",\"name\":\"Top one\",\"color\":\"green\"},\r\n\t                    {\"id\":\"top-2\",\"type\":\"spline\",\"name\":\"Top two\",\"color\":\"blue\"}];\r\n\t$scope.datax={\"id\":\"x\"};\r\n});\r\n```\r\nNow the data is coming from an AngularJS model object. We can use AngularJS features to obtain the data from a service for instance, or we can even do something with an update of the data using *$interval*. The directive listens for changes to the *datapoints* model, it does not change when *datacolumns* or *datax* changes. if the datapoints changes, the graph is redrawn. Open directive2.html to see the sample.\r\n\r\n### directive3.html\r\nIn this sample we are going to show you the timeseries chart, as available from c3.js. To do this, you need to add information about the x-axis. We need to tell it to be of type *timeseries* and we define the format of the tick (meaning the values on the x-axis). The following code block shows the html.\r\n```html\r\n<c3chart bindto-id=\"chart\" chart-data=\"datapoints\" chart-columns=\"datacolumns\" chart-x=\"datax\">\r\n\t<chart-axis>\r\n\t\t<chart-axis-x axis-id=\"x\" axis-type=\"timeseries\">\r\n\t        <chart-axis-x-tick tick-format=\"%Y-%m-%d\"/>\r\n\t\t</chart-axis-x>\r\n\t</chart-axis>\r\n</c3chart>\r\n```\r\nNext the trick to update the data in the chart. What we do is change the model parameter in the $scope called *datapoints*. Than in the directive we watch the datapoints collection and redraw the chart if changes.\r\n```javascript\r\nvar graphApp = angular.module('graphApp', ['gridshore.c3js.chart','graphApp.services']);\r\n\r\ngraphApp.controller('GraphCtrl', function ($scope, $interval,dataService) {\r\n\t$scope.datapoints=[];\r\n\t$scope.datacolumns=[{\"id\":\"top-1\",\"type\":\"line\",\"name\":\"Top one\",\"color\":\"black\"},\r\n\t                    {\"id\":\"top-2\",\"type\":\"spline\",\"name\":\"Top two\"}];\r\n\t$scope.datax={\"id\":\"x\"};\r\n\r\n\t$interval(function(){\r\n\t\tdataService.loadData(function(data){\r\n\t\t\t$scope.datapoints.push(data);\r\n\t\t});\t\t\r\n\t},1000,10);\r\n});\r\n\r\nvar services = angular.module('graphApp.services', []);\r\nservices.factory('dataService', function() {\r\n\tfunction DataService() {\r\n\t\tvar maxNumber = 200;\r\n\r\n\t\t// API methods\r\n\t\tthis.loadData = function(callback) {\r\n\t\t\tcallback({\"x\":new Date(),\"top-1\":randomNumber(),\"top-2\":randomNumber()});\r\n\t\t};\r\n\r\n\t\tfunction randomNumber() {\r\n\t\t\treturn Math.floor((Math.random() * maxNumber) + 1);\r\n\t\t}\r\n\t}\r\n\treturn new DataService();\r\n});\r\n```\r\nThe dataService is used to generate a new object with three properties, the current datetime for the x axis and two random values for the different lines. Notice the *$interval* which helps us to wait one second before creating a new point. It will do this 10 times. The most important part here is that you do not need to change the directive to make the data dynamic. This is purely done in the controller for the page you are on.\r\n\r\nNext up are more features made available by the very nice c3.js library.\r\n### directive3.html\r\nI am not going to show all the code in this case. I am focussing on changes. First one is setting the name of the column and the color of the column (or line)\r\n```html\r\n<chart-column column-id=\"data 1\" \r\n     \t\t  column-name=\"Data 1\"\r\n     \t\t  column-color=\"red\"\r\n\t\t\t  column-values=\"30,200,100,400,150,250\"\r\n\t\t\t  column-type=\"spline\"/>\r\n```\r\nUse the attributes column-color and column-name. Next up is adding a second verticle axis. First part is specifying which columns belong to x, y and y2. Next is configuring things like range and padding and labels for the axis. Padding is placing empty space on top of the y-axis.\r\n```html\r\n<chart-axes values-x=\"x\" y=\"data1,data3\" y2=\"data2\"/>\r\n<chart-axis>\r\n\t<chart-axis-x axis-position=\"outer-center\"\r\n            \t  axis-label=\"Number by 10\"\r\n            \t  axis-type=\"category\">\r\n        <chart-axis-x-tick tick-rotate=\"50\"/>\r\n    </chart-axis-x>\r\n\t<chart-axis-y axis-id=\"y\"\r\n\t              axis-position=\"outer-right\"\r\n            \t  axis-label=\"Higher numbers\"\r\n            \t  padding-top=\"100\"\r\n            \t  padding-bottom=\"0\"\r\n            \t  range-min=\"0\"/>\r\n\t<chart-axis-y axis-id=\"y2\"\r\n\t              axis-position=\"outer-right\"\r\n            \t  axis-label=\"Lower numbers\"\r\n            \t  padding-top=\"10\"\r\n            \t  padding-bottom=\"0\"\r\n            \t  range-max=\"100\"\r\n            \t  range-min=\"0\"/>\r\n</chart-axis>\r\n```\r\nNotice the *chart-axis-x-tick*, this shows the cool feature to rotate the labels on the x-axis. Next up is adding a grid to the chart. You can configure to show the x and y grid. But you can also position one grid line on a specific value.\r\n```html\r\n<chart-grid show-x=\"false\" show-y=\"true\">\r\n\t<chart-grid-optional axis-id=\"x\" grid-value=\"1\" grid-text=\"Start\"/>\r\n\t<chart-grid-optional axis-id=\"y\" grid-value=\"20\" grid-text=\"Minimum\"/>\r\n\t<chart-grid-optional axis-id=\"y\" grid-value=\"200\" grid-text=\"Maximum\"/>\r\n</chart-grid>\r\n```\r\nAnother really cool feature is adding the subchart, with this you can select just a selection of the datapoints in the chart. Together with the zoom functionality this makes a very interactive chart. You have to try it to believe it.\r\n```html\r\n<c3chart bindto-id=\"chart5\" show-labels=\"true\" show-subchart=\"true\" enable-zoom=\"true\">\t\t\r\n</c3chart>\r\n```\r\nThe last thing to show for now is putting the legenda at another location, changing the tooltip, change the size of the chart and provide an array of colors to use for the lines.\r\n```html\r\n<chart-legend show-legend=\"true\" legend-position=\"right\"/>\r\n<chart-colors color-pattern=\"#1f77b4,#ffbb78,#2ca02c,#ff7f0e\"/>\r\n<chart-size chart-height=\"600\" chart-width=\"600\"/>\r\n<chart-tooltip show-tooltip=\"true\" group-tooltip=\"false\"/>\r\n```\r\n\r\n## Version History\r\n### 0.3.0\r\nUpgraded to the latest versions of:\r\nc3js - 0.4.10\r\n\r\nAdded a number of pull requests by:\r\nmark-lai: formatting and x/y tick enhancements\r\nyourivdlans: Some very nice enhancements in the axis, also the sample with the bubble.\r\nResseguie: Added a feature to pass a color function to the chart","google":"UA-180286-1","note":"Don't delete this file! It's used internally to help with page regeneration."}